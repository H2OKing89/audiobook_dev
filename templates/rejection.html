{% extends "base.html" %}

{% block body_class %}rejection-page{% endblock %}

{% block title %}üö´ REJECTION PROTOCOL - Access Denied{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="/static/css/pages/rejection.css">
<script src="/static/js/pages/rejection.js" defer></script>
{% endblock %}

{% block content %}
<div class="rejection-zone">
  <div class="glitch-container">
    
    <!-- Error Terminal Header -->
    <header class="error-terminal">
      <div class="terminal-window">
        <div class="terminal-bar">
          <span class="terminal-dot red"></span>
          <span class="terminal-dot yellow"></span>
          <span class="terminal-dot green"></span>
        </div>
        <div class="terminal-content">
          <div class="error-output">
            <span class="prompt">quentin@audiobook-hq:~$</span> 
            <span class="command">./process_request.sh</span>
          </div>
          <div class="error-line">
            <span class="error-text">ERROR: Request rejected by security protocols</span>
          </div>
          <div class="error-line">
            <span class="error-code">Exit code: 403_NOPE</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Rejection Display -->
    <main class="rejection-display">
      <div class="status-screen">
        
        <!-- Big Rejection Alert -->
        <div class="alert-section">
          <div class="alert-icon">üö´</div>
          <h1 class="alert-title">REQUEST DENIED</h1>
          <div class="alert-subtitle">ACCESS_VIOLATION :: CONTENT_FILTER_TRIGGERED</div>
        </div>

        <!-- Hologram Mascot -->
        <div class="hologram-container">
          <div class="hologram-frame">
            <img src="https://example.com/images/audiobook-icon.png"
                 alt="Disappointed Quentin Hologram" 
                 class="hologram-image"
                 draggable="false">
            <div class="hologram-scanlines"></div>
            <div class="hologram-glitch"></div>
          </div>
          <div class="hologram-label">QUENTIN_AI.exe</div>
        </div>

        <!-- System Message -->
        <div class="system-message">
          <div class="message-header">
            <span class="header-icon">üìä</span>
            <span class="header-text">SYSTEM ANALYSIS COMPLETE</span>
          </div>
          <div class="message-content">
            <div class="message-line">
              <span class="line-label">STATUS:</span>
              <span class="line-value error">REJECTED</span>
            </div>
            <div class="message-line">
              <span class="line-label">REASON:</span>
              <span class="line-value">CONTENT_FILTER_ACTIVATION</span>
            </div>
            <div class="message-line">
              <span class="line-label">PROBABILITY_OF_APPEAL:</span>
              <span class="line-value success">78.3%</span>
            </div>
          </div>
        </div>

        <!-- Dad Joke Console -->
        <div class="joke-console">
          <div class="console-header">
            <span class="console-icon">üé≠</span>
            <span class="console-title">CONSOLATION_PROTOCOL.EXE</span>
          </div>
          <div class="joke-display" id="rejection-joke">
            <div class="loading-joke">
              <span class="loading-text">Loading dad joke...</span>
              <div class="loading-bars">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Panel -->
        <div class="action-panel">
          <div class="panel-header">
            <span class="panel-icon">‚ö°</span>
            <span class="panel-title">RECOVERY_OPTIONS</span>
          </div>
          
          <div class="action-grid">
            <!-- Hidden CSRF form for POST rejection (used by JS or tests) -->
            <form id="hiddenRejectForm" method="post" action="/reject/{{ token }}" style="display:none;">
              {% include 'csrf_input.html' %}
            </form>
            <a href="/" class="action-cmd primary-cmd">
              <div class="cmd-icon">üè†</div>
              <div class="cmd-text">
                <div class="cmd-name">HOME.EXE</div>
                <div class="cmd-desc">Return to base station</div>
              </div>
              <div class="cmd-hotkey">[H]</div>
            </a>

            <a href="mailto:admin@example.com" class="action-cmd secondary-cmd">
              <div class="cmd-icon">üìß</div>
              <div class="cmd-text">
                <div class="cmd-name">APPEAL.EXE</div>
                <div class="cmd-desc">Contact human overlords</div>
              </div>
              <div class="cmd-hotkey">[A]</div>
            </a>

            <button class="action-cmd retry-cmd" data-action="retry">
              <div class="cmd-icon">üîÑ</div>
              <div class="cmd-text">
                <div class="cmd-name">RETRY.EXE</div>
                <div class="cmd-desc">Try again with different data</div>
              </div>
              <div class="cmd-hotkey">[R]</div>
            </button>

            <button class="action-cmd easter-cmd" data-action="easter">
              <div class="cmd-icon">üéÆ</div>
              <div class="cmd-text">
                <div class="cmd-name">SECRET.EXE</div>
                <div class="cmd-desc">Konami code unlocks...</div>
              </div>
              <div class="cmd-hotkey">[?]</div>
            </button>
          </div>
        </div>

        <!-- Pro Tips -->
        <div class="tips-section">
          <div class="tips-header">
            <span class="tips-icon">üí°</span>
            <span class="tips-title">PRO_TIPS.TXT</span>
          </div>
          <div class="tips-content">
            <div class="tip-item">‚Ä¢ Double-check your request formatting</div>
            <div class="tip-item">‚Ä¢ Make sure content meets community guidelines</div>
            <div class="tip-item">‚Ä¢ Try adding more cowbell (always works)</div>
            <div class="tip-item">‚Ä¢ Bribe Quentin with virtual cookies ÔøΩ</div>
          </div>
        </div>
      </div>
    </main>

    <!-- System Footer -->
    <footer class="system-footer">
      <div class="footer-data">
        <span class="footer-item">REJECTION_COUNT: 1</span>
        <span class="footer-item">USER_TEARS: 0</span>
        <span class="footer-item">DAD_JOKES_LOADED: ‚àû</span>
        <span class="footer-item">APPEAL_SUCCESS_RATE: 42%</span>
      </div>
      <div class="footer-message">
        Don't take it personally - even Shakespeare got rejected sometimes! üé≠
      </div>
    </footer>

    <!-- Hidden Easter Egg -->
    <div class="easter-egg-hidden" id="easterEgg">
      <div class="egg-content">
        <h3>ü•ö SECRET ACHIEVEMENT UNLOCKED! ü•ö</h3>
        <p>You found the hidden rejection consolation prize!</p>
        <p>Here's a virtual hug: ü§ó</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
