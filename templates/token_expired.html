{% extends "base.html" %}

{% block body_class %}token-expired-page{% endblock %}

{% block title %}‚è±Ô∏è TOKEN EXPIRED - Time Protocol Violation{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="/static/css/pages/token_expired.css">
<script src="/static/js/pages/token_expired.js" defer></script>
{% endblock %}

{% block content %}
<div class="expired-zone">
  <div class="time-container">

    <!-- Time Violation Terminal Header -->
    <header class="time-terminal">
      <div class="terminal-window">
        <div class="terminal-bar">
          <span class="terminal-dot red active"></span>
          <span class="terminal-dot yellow"></span>
          <span class="terminal-dot green"></span>
        </div>
        <div class="terminal-content">
          <div class="error-output">
            <span class="prompt">quentin@timekeeper:~$</span>
            <span class="command">./validate_token.sh</span>
          </div>
          <div class="error-line">
            <span class="error-text">‚ö†Ô∏è ERROR: Token validation failed</span>
          </div>
          <div class="error-line">
            <span class="error-code">Exit code: 410_GONE</span>
          </div>
          <div class="error-line">
            <span class="time-text">‚è±Ô∏è Time protocol violation detected...</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Expired Display -->
    <main class="expired-display">
      <div class="time-screen">

        <!-- Big Time Alert -->
        <div class="time-section">
          <div class="time-icon">‚è∞</div>
          <h1 class="time-title">TIME PARADOX DETECTED</h1>
          <div class="time-subtitle">TOKEN_EXPIRED :: ACCESS_DENIED</div>
        </div>

        <!-- Time Mascot -->
        <div class="time-container-mascot">
          <div class="mascot-frame">
            <img src="/static/images/quentin_time_confused.png"
                 alt="Time Confused Quentin"
                 class="time-image"
                 draggable="false">
            <div class="time-particles"></div>
            <div class="time-distortion"></div>
            <div class="clock-overlay">üïê</div>
          </div>
          <div class="mascot-label">QUENTIN_AI.exe :: TEMPORAL_CONFUSION</div>
        </div>

        <!-- Time Stats -->
        <div class="time-stats">
          <div class="stats-header">
            <span class="header-icon">‚è±Ô∏è</span>
            <span class="header-text">TEMPORAL ANALYSIS</span>
          </div>
          <div class="stats-content">
            <div class="stat-line">
              <span class="stat-label">TOKEN_STATUS:</span>
              <span class="stat-value expired">EXPIRED</span>
            </div>
            <div class="stat-line">
              <span class="stat-label">TIME_REMAINING:</span>
              <span class="stat-value">-‚àû SECONDS</span>
            </div>
            <div class="stat-line">
              <span class="stat-label">VALIDITY_WINDOW:</span>
              <span class="stat-value expired">CLOSED</span>
            </div>
            <div class="stat-line">
              <span class="stat-label">NEXT_ACTION:</span>
              <span class="stat-value">GET_NEW_TOKEN</span>
            </div>
          </div>
        </div>

        <!-- Time Fact Console -->
        <div class="fact-console">
          <div class="console-header">
            <span class="console-icon">üï∞Ô∏è</span>
            <span class="console-title">TIME_FACTS.EXE</span>
          </div>
          <div class="fact-display" id="time-fact">
            <div class="loading-fact">
              <span class="loading-text">Loading temporal wisdom...</span>
              <div class="loading-clocks">
                <span class="clock">üïê</span>
                <span class="clock">üïë</span>
                <span class="clock">üïí</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Panel -->
        <div class="action-panel">
          <div class="panel-header">
            <span class="panel-icon">üîÑ</span>
            <span class="panel-title">RECOVERY_OPTIONS</span>
          </div>

          <div class="action-grid">
            <a href="/" class="action-cmd primary-cmd">
              <div class="cmd-icon">üè†</div>
              <div class="cmd-text">
                <div class="cmd-name">HOME.EXE</div>
                <div class="cmd-desc">Return to time portal</div>
              </div>
              <div class="cmd-hotkey">[H]</div>
            </a>

            <button class="action-cmd secondary-cmd" onclick="showTimeHelp()">
              <div class="cmd-icon">‚ùì</div>
              <div class="cmd-text">
                <div class="cmd-name">HELP.EXE</div>
                <div class="cmd-desc">Temporal assistance</div>
              </div>
              <div class="cmd-hotkey">[?]</div>
            </button>

            <button class="action-cmd info-cmd" onclick="explainTokens()">
              <div class="cmd-icon">üîë</div>
              <div class="cmd-text">
                <div class="cmd-name">TOKENS.EXE</div>
                <div class="cmd-desc">What are tokens anyway?</div>
              </div>
              <div class="cmd-hotkey">[T]</div>
            </button>

            <button class="action-cmd time-cmd" onclick="timeTravel()">
              <div class="cmd-icon">üöÄ</div>
              <div class="cmd-text">
                <div class="cmd-name">TIMETRAVEL.EXE</div>
                <div class="cmd-desc">Definitely not real...</div>
              </div>
              <div class="cmd-hotkey">[TIME]</div>
            </button>
          </div>
        </div>

        <!-- Help Section -->
        <div class="help-section">
          <div class="help-header">
            <span class="help-icon">üí°</span>
            <span class="help-title">WHAT_HAPPENED.TXT</span>
          </div>
          <div class="help-content">
            <div class="help-item">
              <div class="help-label">TOKEN_EXPIRED:</div>
              <div class="help-desc">Your approval link lived its full life and retired gracefully</div>
            </div>
            <div class="help-item">
              <div class="help-label">ALREADY_USED:</div>
              <div class="help-desc">Someone else already clicked this link faster than light</div>
            </div>
            <div class="help-item">
              <div class="help-label">TIME_PARADOX:</div>
              <div class="help-desc">You tried to use a link from the future (or past)</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- System Footer -->
    <footer class="system-footer">
      <div class="footer-data">
        <span class="footer-item">TIME_SYNC: FAILED</span>
        <span class="footer-item">PARADOX_LEVEL: MODERATE</span>
        <span class="footer-item">TIMELINE_INTEGRITY: 87%</span>
        <span class="footer-item">NEXT_TOKEN: AVAILABLE</span>
      </div>
      <div class="footer-message">
        Powered by Quentin's Temporal Oops Prevention System‚Ñ¢ ‚è∞
      </div>
    </footer>

    <!-- Hidden Help Overlay -->
    <div class="help-overlay" id="helpOverlay">
      <div class="overlay-content">
        <h2>üï∞Ô∏è TEMPORAL ASSISTANCE CENTER</h2>
        <p>Don't worry! Time-related issues are surprisingly common.</p>
        <p>Just go back to the home page and start fresh!</p>
        <div class="help-tip">üí° Pro tip: Tokens are like ice cream - best used quickly!</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
